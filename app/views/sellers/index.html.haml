= render 'header/header' # ヘッダーのパーシャルを呼び出す

.seller-mypage
  %h1 セラーマイページ

  .seller-btn
    = link_to edit_seller_path(@seller) do
      .link_inner
        %p プロフィール編集

    = link_to new_event_path do # 追加
      .link_inner
        %p イベント出店を投稿

  .seller-profile-info
    %h2 セラープロフィール情報

    %table
      %tr
        %th アカウント名
        %td= @seller.name
      %tr
        %th 概要の説明
        %td= @seller.description
      %tr
        %th 住所
        %td= @seller.address
      
      %tr
        %th 電話番号
        %td= @seller.phone_number
      %tr
        %th メールアドレス
        %td= @seller.email
      %tr
        %th ウェブサイト
        %td= @seller.website
      %tr
        %th 営業時間
        %td
          %p= "曜日: #{@seller.business_hours_days}"
          %p= "時間: #{@seller.business_hours_start&.strftime('%H:%M')} - #{@seller.business_hours_end&.strftime('%H:%M')}"

      %tr
        %th 過去の出店実績
        %td
          - if @seller.past_exhibitions_names.present?
            - @seller.past_exhibitions_names.split(',').each_with_index do |name, index|
              %p= "#{name}: #{(@seller.past_exhibitions_dates&.split(',')[index])}"
          - else
            %p 設定なし

      %tr
        %th SNSアカウント
        %td
          - if @seller.sns_accounts_types.present?
            - @seller.sns_accounts_types.split(',').each_with_index do |type, index|
              - sns_type = Seller.sns_types.keys[type.to_i]
              - url = @seller.sns_accounts_urls&.split(',')[type.to_i]
              - if url.present?
                = link_to url do
                  -# = image_tag "#{sns_type}.png" # カラーアイコン
          - else
            %p 設定なし

      %tr
        %th 画像
        %td
          - if @seller.images.any?
            - @seller.images.each do |image|
              = image_tag image
          - else
            = image_tag "no_image_square.jpg"
      %tr
        %th 動画
        %td= @seller.video

      %tr
        %th 運営からのコメント
        %td
          - if @comments.present?
            - @comments.each do |comment|
              .admin-comment
                %p.comment-date= l comment.created_at, format: :long
                %p= comment.body
                
          - else
            %p まだ運営からのコメントはありません。